/* 
 * Mobile-Specific Responsive Styles
 * These styles are designed to enhance mobile experience while preserving desktop functionality
 * Breakpoint: max-width: 768px (mobile and small tablets)
 */

/* ==== MOBILE LAYOUT OPTIMIZATIONS ==== */

@media (max-width: 768px) {
   /* Main app container adjustments */
   .prevent-layout-shift {
      overflow-x: hidden;
   }

   /* Header mobile optimizations */
   .mobile-header {
      padding: 0.75rem 1rem;
      min-height: 60px;
   }

   .mobile-header h1 {
      font-size: 1.125rem;
      line-height: 1.25;
   }

   .mobile-header p {
      font-size: 0.75rem;
   }

   /* Hide progress stats on very small screens */
   .mobile-progress-hidden {
      display: none !important;
   }

   /* Mobile button adjustments */
   .mobile-btn {
      padding: 0.625rem 0.75rem;
      font-size: 0.875rem;
   }

   .mobile-btn-icon-only {
      padding: 0.625rem;
      min-width: 40px;
   }

   /* Grid layout mobile adjustments */
   .mobile-grid {
      grid-template-columns: 1fr !important;
      gap: 1rem !important;
      height: auto !important;
      padding: 0 1rem;
   }

   /* Calendar mobile optimizations */
   .mobile-calendar {
      padding: 1rem;
      margin-bottom: 1rem;
   }

   .mobile-calendar h2 {
      font-size: 1.125rem;
   }

   .mobile-calendar-day {
      width: 2.5rem !important;
      height: 2.5rem !important;
      font-size: 0.875rem;
   }

   .mobile-calendar-weekday {
      font-size: 0.75rem;
      height: 2rem;
   }

   .mobile-calendar-legend {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      font-size: 0.75rem;
   }

   .mobile-calendar-legend-item {
      display: flex;
      align-items: center;
      gap: 0.375rem;
   }

   /* Habit cards mobile optimizations */
   .mobile-habits-container {
      max-height: none !important;
      margin-bottom: 1rem;
   }

   .mobile-habit-card {
      padding: 1rem;
      border-radius: 0.75rem;
   }

   .mobile-habit-card-header {
      margin-bottom: 0.75rem;
   }

   .mobile-habit-card-title {
      font-size: 1rem;
      line-height: 1.25;
   }

   .mobile-habit-card-description {
      font-size: 0.875rem;
      line-height: 1.25;
      margin-top: 0.25rem;
   }

   .mobile-habit-icon {
      width: 2.5rem !important;
      height: 2.5rem !important;
   }

   .mobile-habit-icon svg {
      width: 1.25rem !important;
      height: 1.25rem !important;
   }

   /* Touch-friendly toggle buttons */
   .mobile-toggle-btn {
      min-height: 44px;
      min-width: 44px;
      padding: 0.75rem;
      border-radius: 0.75rem;
      font-size: 0.875rem;
   }

   /* Action buttons mobile layout */
   .mobile-action-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.75rem;
   }

   .mobile-action-btn {
      flex: 1;
      min-height: 40px;
      font-size: 0.75rem;
      padding: 0.5rem;
      border-radius: 0.5rem;
   }

   /* Motivational content mobile adjustments */
   .mobile-motivational {
      padding: 1rem;
      margin-bottom: 1rem;
   }

   .mobile-motivational h3 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
   }

   .mobile-motivational-item {
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      border-radius: 0.75rem;
   }

   /* Modal mobile optimizations */
   .mobile-modal {
      margin: 1rem;
      max-height: calc(100vh - 2rem);
      border-radius: 1rem;
   }

   .mobile-modal-header {
      padding: 1rem 1rem 0.5rem;
   }

   .mobile-modal-content {
      padding: 0 1rem 1rem;
      max-height: calc(100vh - 8rem);
      overflow-y: auto;
   }

   .mobile-modal-footer {
      padding: 0.75rem 1rem 1rem;
      border-top: 1px solid #e5e7eb;
   }

   /* Form elements mobile optimization */
   .mobile-form-input {
      min-height: 44px;
      font-size: 1rem; /* Prevents zoom on iOS */
      padding: 0.75rem;
      border-radius: 0.75rem;
   }

   .mobile-form-textarea {
      min-height: 80px;
      font-size: 1rem;
      padding: 0.75rem;
      border-radius: 0.75rem;
   }

   .mobile-form-select {
      min-height: 44px;
      font-size: 1rem;
      padding: 0.75rem;
      border-radius: 0.75rem;
   }

   /* Stats display mobile adjustments */
   .mobile-stats {
      padding: 0.75rem;
      border-radius: 0.75rem;
      margin-bottom: 0.75rem;
   }

   .mobile-stats-title {
      font-size: 0.875rem;
      margin-bottom: 0.25rem;
   }

   .mobile-stats-value {
      font-size: 1.25rem;
      font-weight: 600;
   }

   /* Date info mobile layout */
   .mobile-date-info {
      padding: 0.75rem;
      border-radius: 0.75rem;
      text-align: center;
   }

   .mobile-date-info h3 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
   }

   /* Empty state mobile adjustments */
   .mobile-empty-state {
      padding: 2rem 1rem;
      text-align: center;
   }

   .mobile-empty-state h3 {
      font-size: 1.125rem;
      margin-bottom: 0.5rem;
   }

   .mobile-empty-state p {
      font-size: 0.875rem;
      margin-bottom: 1rem;
   }

   /* Network status mobile positioning */
   .mobile-network-status {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 60;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
   }

   /* Error messages mobile positioning */
   .mobile-error-toast {
      position: fixed;
      bottom: 1rem;
      left: 1rem;
      right: 1rem;
      border-radius: 0.75rem;
      padding: 0.75rem;
      font-size: 0.875rem;
      z-index: 50;
   }

   /* User menu mobile adjustments */
   .mobile-user-menu {
      position: relative;
   }

   .mobile-user-dropdown {
      position: fixed;
      top: 60px;
      right: 1rem;
      left: 1rem;
      border-radius: 0.75rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
   }

   /* Loading states mobile optimization */
   .mobile-loading-overlay {
      border-radius: 0.75rem;
   }

   /* Improved touch targets */
   .mobile-touch-target {
      min-height: 44px;
      min-width: 44px;
   }

   /* Optimized scroll areas */
   .mobile-scroll-area {
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
   }

   /* Better visual hierarchy on mobile */
   .mobile-section-title {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      padding: 0 0.25rem;
   }

   /* Compact spacing utilities for mobile */
   .mobile-compact-spacing > * + * {
      margin-top: 0.5rem;
   }

   /* Mobile-specific animations */
   .mobile-slide-up {
      animation: mobileSlideUp 0.3s ease-out;
   }

   @keyframes mobileSlideUp {
      from {
         transform: translateY(100%);
         opacity: 0;
      }
      to {
         transform: translateY(0);
         opacity: 1;
      }
   }

   /* Keyboard safe area for iOS */
   .mobile-keyboard-safe {
      padding-bottom: env(keyboard-inset-height, 0);
   }

   /* Mobile landscape optimizations */
   @media (orientation: landscape) and (max-height: 500px) {
      .mobile-landscape-compact {
         padding: 0.5rem;
      }

      .mobile-calendar {
         padding: 0.75rem;
      }

      .mobile-habit-card {
         padding: 0.75rem;
      }
   }
}

/* ==== SMALL MOBILE DEVICES (max-width: 480px) ==== */

@media (max-width: 480px) {
   .mobile-calendar-day {
      width: 2rem !important;
      height: 2rem !important;
      font-size: 0.75rem;
   }

   .mobile-habit-card-title {
      font-size: 0.875rem;
   }

   .mobile-habit-card-description {
      font-size: 0.75rem;
   }

   .mobile-habit-icon {
      width: 2rem !important;
      height: 2rem !important;
   }

   .mobile-habit-icon svg {
      width: 1rem !important;
      height: 1rem !important;
   }

   .mobile-action-btn {
      font-size: 0.6875rem;
      padding: 0.375rem;
   }

   .mobile-modal {
      margin: 0.5rem;
   }
}

/* ==== ACCESSIBILITY IMPROVEMENTS FOR MOBILE ==== */

@media (max-width: 768px) {
   /* Improved focus states for mobile */
   .mobile-focus-ring:focus {
      outline: 2px solid #3b82f6;
      outline-offset: 2px;
   }

   /* Better tap highlight */
   .mobile-tap-highlight {
      -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
   }

   /* Reduced motion for mobile users who prefer it */
   @media (prefers-reduced-motion: reduce) {
      .mobile-slide-up,
      .animate-fade-in-up {
         animation: none;
      }

      .transition-all {
         transition: none;
      }
   }
}

/* ==== DARK MODE SUPPORT FOR MOBILE ==== */

@media (max-width: 768px) and (prefers-color-scheme: dark) {
   .mobile-dark-bg {
      background-color: #1f2937;
   }

   .mobile-dark-text {
      color: #f9fafb;
   }

   .mobile-dark-border {
      border-color: #374151;
   }
}
